crystal_doc_search_index_callback({"repository_name":"restrict","body":"# restrict.cr\n[![Docs](https://img.shields.io/badge/docs-available-brightgreen.svg)](https://chris-huxtable.github.io/restrict.cr/)\n[![GitHub release](https://img.shields.io/github/release/chris-huxtable/restrict.cr.svg)](https://github.com/chris-huxtable/restrict.cr/releases)\n\nSimplifies privilege separation, and chroot in Crystal.\n\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  restrict:\n    github: chris-huxtable/restrict.cr\n```\n\n\n## Usage\n\n```crystal\nrequire \"restrict\"\n```\n\nRestricting:\n```crystal\nProcess.restrict(\"/var/empty\", \"user\", \"group\")\n# restricted environment\n```\nor,\n```crystal\nProcess.restrict(\"/var/empty\", \"user\", \"group\", wait: true) {\n  # restricted environment\n}\n\n# runs after block completes. `wait: false` will not wait until block completes.\n```\n\n\n## Contributing\n\n1. Fork it ( https://github.com/chris-huxtable/restict.cr/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'Add some feature')\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n\n## Contributors\n\n- [Chris Huxtable](https://github.com/chris-huxtable) - creator, maintainer\n","program":{"html_id":"restrict/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"restrict","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"restrict/Process","path":"Process.html","kind":"class","full_name":"Process","name":"Process","abstract":false,"superclass":{"html_id":"restrict/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"restrict/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"restrict/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib/user_group/src/process.cr","line_number":18,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/lib/user_group/src/process.cr#L18"},{"filename":"src/restrict.cr","line_number":18,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/src/restrict.cr#L18"}],"repository_name":"restrict","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"restrict(path:String?=nil,user:UserTypes?=nil,group:GroupTypes?=nil):Nil-class-method","html_id":"restrict(path:String?=nil,user:UserTypes?=nil,group:GroupTypes?=nil):Nil-class-method","name":"restrict","doc":"Changes the root directory and the current working directory for the current\nprocess and sets the real, effective, and saved user and group for the current\nprocess to the ones specified.\n\n```\nProcess.restrict(\"/var/empty\", \"nobody\", \"nobody\")\n```","summary":"<p>Changes the root directory and the current working directory for the current process and sets the real, effective, and saved user and group for the current process to the ones specified.</p>","abstract":false,"args":[{"name":"path","doc":null,"default_value":"nil","external_name":"path","restriction":"String | ::Nil"},{"name":"user","doc":null,"default_value":"nil","external_name":"user","restriction":"UserTypes | ::Nil"},{"name":"group","doc":null,"default_value":"nil","external_name":"group","restriction":"GroupTypes | ::Nil"}],"args_string":"(path : String? = <span class=\"n\">nil</span>, user : UserTypes? = <span class=\"n\">nil</span>, group : GroupTypes? = <span class=\"n\">nil</span>) : Nil","args_html":"(path : String? = <span class=\"n\">nil</span>, user : <a href=\"Process/UserTypes.html\">UserTypes</a>? = <span class=\"n\">nil</span>, group : <a href=\"Process/GroupTypes.html\">GroupTypes</a>? = <span class=\"n\">nil</span>) : Nil","location":{"filename":"src/restrict.cr","line_number":31,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/src/restrict.cr#L31"},"def":{"name":"restrict","args":[{"name":"path","doc":null,"default_value":"nil","external_name":"path","restriction":"String | ::Nil"},{"name":"user","doc":null,"default_value":"nil","external_name":"user","restriction":"UserTypes | ::Nil"},{"name":"group","doc":null,"default_value":"nil","external_name":"group","restriction":"GroupTypes | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"if (user.is_a?(String) || user.is_a?(Int))\n  user = System::User.get(user)\nend\nif (group.is_a?(String) || group.is_a?(Int))\n  group = System::Group.get(group)\nend\nif (path)\n  chroot(path)\nend\nif (group)\n  self.group = group\nend\nif (user)\n  self.user = user\nend\n"}}],"constructors":[{"id":"restrict(path:String?=nil,user:UserTypes?=-1,group:GroupTypes?=-1,wait:Bool=true,&):Process?-class-method","html_id":"restrict(path:String?=nil,user:UserTypes?=-1,group:GroupTypes?=-1,wait:Bool=true,&):Process?-class-method","name":"restrict","doc":"Forks the current process then changes the root directory and the current working\ndirectory and sets the real, effective, and saved user and group to the ones\nspecified before yielding to the given block.\n\n```\nProcess.restrict(\"/var/empty\", \"nobody\", \"nobody\", wait: true) {\n  # New restricted process\n}\n```","summary":"<p>Forks the current process then changes the root directory and the current working directory and sets the real, effective, and saved user and group to the ones specified before yielding to the given block.</p>","abstract":false,"args":[{"name":"path","doc":null,"default_value":"nil","external_name":"path","restriction":"String | ::Nil"},{"name":"user","doc":null,"default_value":"-1","external_name":"user","restriction":"UserTypes | ::Nil"},{"name":"group","doc":null,"default_value":"-1","external_name":"group","restriction":"GroupTypes | ::Nil"},{"name":"wait","doc":null,"default_value":"true","external_name":"wait","restriction":"Bool"}],"args_string":"(path : String? = <span class=\"n\">nil</span>, user : UserTypes? = <span class=\"n\">-1</span>, group : GroupTypes? = <span class=\"n\">-1</span>, wait : Bool = <span class=\"n\">true</span>, &) : Process?","args_html":"(path : String? = <span class=\"n\">nil</span>, user : <a href=\"Process/UserTypes.html\">UserTypes</a>? = <span class=\"n\">-1</span>, group : <a href=\"Process/GroupTypes.html\">GroupTypes</a>? = <span class=\"n\">-1</span>, wait : Bool = <span class=\"n\">true</span>, &) : <a href=\"Process.html\">Process</a>?","location":{"filename":"src/restrict.cr","line_number":50,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/src/restrict.cr#L50"},"def":{"name":"restrict","args":[{"name":"path","doc":null,"default_value":"nil","external_name":"path","restriction":"String | ::Nil"},{"name":"user","doc":null,"default_value":"-1","external_name":"user","restriction":"UserTypes | ::Nil"},{"name":"group","doc":null,"default_value":"-1","external_name":"group","restriction":"GroupTypes | ::Nil"},{"name":"wait","doc":null,"default_value":"true","external_name":"wait","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":0,"block_arg":null,"return_type":"Process | ::Nil","visibility":"Public","body":"proc = Process.fork do\n  restrict(path, user, group)\n  yield\nend\nif (!wait)\n  return proc\nend\nproc.wait\nreturn nil\n"}}],"instance_methods":[],"macros":[],"types":[{"html_id":"restrict/Process/GroupTypes","path":"Process/GroupTypes.html","kind":"alias","full_name":"Process::GroupTypes","name":"GroupTypes","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/restrict.cr","line_number":21,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/src/restrict.cr#L21"}],"repository_name":"restrict","program":false,"enum":false,"alias":true,"aliased":"(Int32 | String | System::Group | UInt32)","aliased_html":"Int32 | String | System::Group | UInt32","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"restrict/Process","kind":"class","full_name":"Process","name":"Process"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"restrict/Process/UserTypes","path":"Process/UserTypes.html","kind":"alias","full_name":"Process::UserTypes","name":"UserTypes","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/restrict.cr","line_number":20,"url":"https://github.com/chris-huxtable/restrict.cr/blob/v0.2.2/src/restrict.cr#L20"}],"repository_name":"restrict","program":false,"enum":false,"alias":true,"aliased":"(Int32 | String | System::User | UInt32)","aliased_html":"Int32 | String | System::User | UInt32","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"restrict/Process","kind":"class","full_name":"Process","name":"Process"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}})